<!DOCTYPE html>
<html>
	<head>
		<title>Simple Map</title>
	<style>
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
		#map {
			height: 50%;
		}

	</style>	
	</head>
		
<body>
	<div id="map"></div>
	<script>

	var data=[
	
	]
	var map;
	var geocoder;
	function initMap() {
		map = new google.maps.Map(document.getElementById('map'), {
			center: {lat: 25.037, lng: 121.567},
			zoom: 15
		});
		geocoder=new google.maps.Geocoder();
		for(var i=0;i<data.length;i++){
			showSite(i);
		}
		/* get location */
		  var infoWindow = new google.maps.InfoWindow({map: map});

		if (navigator.geolocation) {
    	navigator.geolocation.getCurrentPosition(function(position) {
     		var pos = {
        	lat: position.coords.latitude,
        	lng: position.coords.longitude
      		};
      		infoWindow.setPosition(pos);
      		infoWindow.setContent('Location found.');
      		map.setCenter(pos);
    	}, function() {
      	handleLocationError(true, infoWindow, map.getCenter());
      	data.push(position.coords.latitude+" "+position.coords.longitude);
    	});
  		} else {
    	handleLocationError(false, infoWindow, map.getCenter());
 		 }
		}
		function showSite(index){
			geocoder.geocode({address:data[index].addr}, function(results){
			var marker=new google.maps.Marker({
			position:results[0].geometry.location,
			map:map
		});
			var info=new google.maps.InfoWindow({
			content:data[index].name	
		});
		google.maps.event.addDomListener(marker, "click" , function(){
		info.open(map, marker);		
		});
		map.setCenter(results[0].geometry.location);	
		});
		}
		/* get location */
	</script>
    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"async defer></script>




</doby>


</html>